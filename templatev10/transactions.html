<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptoEx - Historial de Transacciones</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.7.14/dist/vue.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; transition: background-color 0.3s, color 0.3s; }
        
        /* Light Mode Styles */
        .light-mode { background-color: #f5f5f5; color: #1a1a1a; }
        .light-mode .bg-gray-900 { background-color: #f5f5f5 !important; }
        .light-mode .bg-gray-800 { background-color: #ffffff !important; border: 1px solid #e5e5e5; }
        .light-mode .bg-gray-700 { background-color: #f8f8f8 !important; }
        .light-mode .text-white { color: #1a1a1a !important; }
        .light-mode .text-gray-300 { color: #666666 !important; }
        .light-mode .text-gray-400 { color: #999999 !important; }
        .light-mode .border-gray-700 { border-color: #e5e5e5 !important; }

        .toggle-switch { position: relative; width: 48px; height: 24px; background-color: #4b5563; border-radius: 12px; cursor: pointer; transition: background-color 0.3s; }
        .toggle-switch.active { background-color: #fbbf24; }
        .toggle-slider { position: absolute; top: 2px; left: 2px; width: 20px; height: 20px; background-color: white; border-radius: 50%; transition: transform 0.3s; }
        .toggle-switch.active .toggle-slider { transform: translateX(24px); }
    </style>
</head>
<body class="bg-gray-900 text-white" :class="{'light-mode': isLightMode}">
    <div id="app">
        <!-- Header -->
        <header class="bg-gray-800 border-b border-gray-700 sticky top-0 z-50">
            <div class="px-4 py-3 flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <button @click="goBack" class="text-gray-400 hover:text-white">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                    </button>
                    <h1 class="text-xl font-bold text-yellow-400">Historial de Transacciones</h1>
                </div>
                <div class="flex items-center gap-2">
                    <div class="hidden md:flex items-center gap-2">
                        <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
                        <div @click="toggleTheme" class="toggle-switch" :class="{'active': isLightMode}"><div class="toggle-slider"></div></div>
                        <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd"></path></svg>
                    </div>
                </div>
            </div>
        </header>

        <!-- Filters -->
        <div class="bg-gray-800 border-b border-gray-700 p-4">
            <div class="flex flex-wrap gap-4">
                <select v-model="filters.type" class="bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500">
                    <option value="">Todos los tipos</option>
                    <option value="deposit">Depósitos</option>
                    <option value="withdraw">Retiros</option>
                </select>
                <select v-model="filters.crypto" class="bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500">
                    <option value="">Todas las criptos</option>
                    <option v-for="crypto in cryptoList" :key="crypto" :value="crypto">{{ crypto }}</option>
                </select>
                <select v-model="filters.status" class="bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500">
                    <option value="">Todos los estados</option>
                    <option value="completed">Completado</option>
                    <option value="pending">Pendiente</option>
                    <option value="failed">Fallido</option>
                </select>
                <input type="date" v-model="filters.date" class="bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500">
            </div>
        </div>

        <!-- Transactions List -->
        <div class="container mx-auto px-4 py-6">
            <div class="space-y-4">
                <div v-for="tx in filteredTransactions" :key="tx.id" class="bg-gray-800 rounded-lg p-4 hover:bg-gray-700 transition cursor-pointer" @click="showTransactionDetails(tx)">
                    <div class="flex justify-between items-start">
                        <div class="flex items-start gap-3">
                            <div :class="getTransactionIconClass(tx.type)" class="p-2 rounded-lg">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path v-if="tx.type === 'deposit'" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
                                    <path v-else stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path>
                                </svg>
                            </div>
                            <div>
                                <h4 class="font-bold">{{ getTransactionTitle(tx) }}</h4>
                                <p class="text-sm text-gray-400">{{ tx.date }}</p>
                                <p class="text-sm text-gray-400">ID: {{ tx.id }}</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <p :class="tx.type === 'deposit' ? 'text-green-400' : 'text-red-400'" class="font-bold">
                                {{ tx.type === 'deposit' ? '+' : '-' }}{{ tx.amount }} {{ tx.symbol }}
                            </p>
                            <p class="text-sm" :class="getStatusTextClass(tx.status)">{{ tx.status }}</p>
                            <p class="text-sm text-gray-400">≈ {{ tx.fiatValue }} EUR</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Transaction Details Modal -->
            <div v-if="selectedTransaction" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                <div class="bg-gray-800 rounded-lg w-full max-w-lg">
                    <div class="p-4 border-b border-gray-700 flex justify-between items-center">
                        <h3 class="text-lg font-bold">Detalles de la Transacción</h3>
                        <button @click="selectedTransaction = null" class="text-gray-400 hover:text-white">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                        </button>
                    </div>
                    <div class="p-4 space-y-4">
                        <div class="grid grid-cols-2 gap-4 text-sm">
                            <div class="text-gray-400">ID de Transacción</div>
                            <div class="font-mono">{{ selectedTransaction.id }}</div>
                            
                            <div class="text-gray-400">Tipo</div>
                            <div>{{ getTransactionTitle(selectedTransaction) }}</div>
                            
                            <div class="text-gray-400">Cantidad</div>
                            <div class="font-bold">{{ selectedTransaction.amount }} {{ selectedTransaction.symbol }}</div>
                            
                            <div class="text-gray-400">Valor en EUR</div>
                            <div>{{ selectedTransaction.fiatValue }} EUR</div>
                            
                            <div class="text-gray-400">Fecha</div>
                            <div>{{ selectedTransaction.date }}</div>
                            
                            <div class="text-gray-400">Estado</div>
                            <div :class="getStatusTextClass(selectedTransaction.status)">{{ selectedTransaction.status }}</div>
                            
                            <div class="text-gray-400">Red</div>
                            <div>{{ selectedTransaction.network }}</div>
                            
                            <div class="text-gray-400">Hash</div>
                            <div class="font-mono text-xs break-all">{{ selectedTransaction.hash }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        new Vue({
            el: '#app',
            data: {
                isLightMode: false,
                filters: {
                    type: '',
                    crypto: '',
                    status: '',
                    date: ''
                },
                selectedTransaction: null,
                cryptoList: ['BTC', 'ETH', 'USDC'],
                transactions: [
                    {
                        id: 'TX123456789',
                        type: 'deposit',
                        amount: '0.1254',
                        symbol: 'BTC',
                        fiatValue: '5,487.32',
                        date: '2024-01-15 14:30',
                        status: 'completed',
                        network: 'Bitcoin Network',
                        hash: '0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef'
                    },
                    {
                        id: 'TX987654321',
                        type: 'withdraw',
                        amount: '2.5000',
                        symbol: 'ETH',
                        fiatValue: '4,750.00',
                        date: '2024-01-14 09:15',
                        status: 'pending',
                        network: 'Ethereum Network',
                        hash: '0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890'
                    },
                    {
                        id: 'TX456789123',
                        type: 'deposit',
                        amount: '500.00',
                        symbol: 'USDC',
                        fiatValue: '500.00',
                        date: '2024-01-13 18:45',
                        status: 'completed',
                        network: 'Ethereum Network',
                        hash: '0x7890abcdef1234567890abcdef1234567890abcdef1234567890abcdef123456'
                    }
                ]
            },
            computed: {
                filteredTransactions() {
                    return this.transactions.filter(tx => {
                        if (this.filters.type && tx.type !== this.filters.type) return false;
                        if (this.filters.crypto && tx.symbol !== this.filters.crypto) return false;
                        if (this.filters.status && tx.status !== this.filters.status) return false;
                        if (this.filters.date) {
                            const txDate = tx.date.split(' ')[0];
                            if (txDate !== this.filters.date) return false;
                        }
                        return true;
                    });
                }
            },
            methods: {
                toggleTheme() {
                    this.isLightMode = !this.isLightMode;
                },
                goBack() {
                    window.history.back();
                },
                getTransactionIconClass(type) {
                    return type === 'deposit' 
                        ? 'bg-green-500 bg-opacity-20 text-green-500'
                        : 'bg-red-500 bg-opacity-20 text-red-500';
                },
                getTransactionTitle(tx) {
                    return tx.type === 'deposit'
                        ? `Depósito de ${tx.symbol}`
                        : `Retiro de ${tx.symbol}`;
                },
                getStatusTextClass(status) {
                    const classes = {
                        'completed': 'text-green-400',
                        'pending': 'text-yellow-400',
                        'failed': 'text-red-400'
                    };
                    return classes[status] || 'text-gray-400';
                },
                showTransactionDetails(tx) {
                    this.selectedTransaction = tx;
                }
            }
        });
    </script>
</body>
</html>